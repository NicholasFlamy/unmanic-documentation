"use strict";(self.webpackChunkunmanic_documentation=self.webpackChunkunmanic_documentation||[]).push([[1339],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>f});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},p=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||o;return n?i.createElement(f,a(a({ref:t},p),{},{components:n})):i.createElement(f,a({ref:t},p))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,a[1]=l;for(var c=2;c<o;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}m.displayName="MDXCreateElement"},611:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=n(7462),r=(n(7294),n(3905));const o={title:"Running a FileBot Post-processor",description:"Running a FileBot Post-processor",id:"filebot_post_processor"},a=void 0,l={unversionedId:"guides/filebot_post_processor",id:"guides/filebot_post_processor",title:"Running a FileBot Post-processor",description:"Running a FileBot Post-processor",source:"@site/docs/guides/filebot.mdx",sourceDirName:"guides",slug:"/guides/filebot_post_processor",permalink:"/docs/guides/filebot_post_processor",draft:!1,tags:[],version:"current",frontMatter:{title:"Running a FileBot Post-processor",description:"Running a FileBot Post-processor",id:"filebot_post_processor"},sidebar:"docs",previous:{title:"NVIDIA Hardware Acceleration on Linux",permalink:"/docs/guides/nvidia_support_unmanic_on_linux"},next:{title:"Subtitle Stripping",permalink:"/docs/guides/script_subtitle_stripping"}},s={},c=[{value:"Instructions:",id:"instructions",level:2},{value:"1) Enable FileBot in the Unmanic container",id:"1-enable-filebot-in-the-unmanic-container",level:3},{value:"2) Install the &#39;External Post-processor Script&#39; Plugin",id:"2-install-the-external-post-processor-script-plugin",level:3},{value:"3) Configure the &#39;External Post-processor Script&#39; Plugin",id:"3-configure-the-external-post-processor-script-plugin",level:3},{value:"4) Enable the &#39;External Post-processor Script&#39; Plugin",id:"4-enable-the-external-post-processor-script-plugin",level:3},{value:"Plugin Config Examples",id:"plugin-config-examples",level:2},{value:"Rename TV Shows with the correct codec in the file name:",id:"rename-tv-shows-with-the-correct-codec-in-the-file-name",level:3},{value:"Run the command for each output file created by Unmanic",id:"run-the-command-for-each-output-file-created-by-unmanic",level:5},{value:"Command or script to execute:",id:"command-or-script-to-execute",level:5},{value:"Arguments to pass to the command or script:",id:"arguments-to-pass-to-the-command-or-script",level:5}],p={toc:c};function u(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,i.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://img.shields.io/badge/Difficulty-easy-green?style=flat",alt:"Difficulty"}),"\n",(0,r.kt)("img",{parentName:"p",src:"https://img.shields.io/badge/Setup%20Time-20%20minutes-orange?style=flat",alt:"Setup Time"})),(0,r.kt)("p",null,"Follow these instructions to configure the Unmanic Docker container for running FileBot as a Post-processor function."),(0,r.kt)("h2",{id:"instructions"},"Instructions:"),(0,r.kt)("h3",{id:"1-enable-filebot-in-the-unmanic-container"},"1) Enable FileBot in the Unmanic container"),(0,r.kt)("p",null,"The Unmanic container does not have FileBot installed out-of-the-box."),(0,r.kt)("p",null,"You will need to install it into the container during container startup."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Create a file inside the container ",(0,r.kt)("inlineCode",{parentName:"li"},"/config/startup.sh")),(0,r.kt)("li",{parentName:"ol"},"Inside this file append the following contents:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'\n#  _____ _ _      _           _\n# |  ___(_) | ___| |__   ___ | |_\n# | |_  | | |/ _ \\ \'_ \\ / _ \\| __|\n# |  _| | | |  __/ |_) | (_) | |_\n# |_|   |_|_|\\___|_.__/ \\___/ \\__|\n#\n# Flag to easily disable installation on startup\nINSTALL_FILEBOT=true\nINSTALL_LEGACY_FILEBOT=false\n# Define software versions (only used for legacy installation)\nARCH=amd64  # (amd64, 1386, armhf)\nFILEBOT_VERSION=4.7.9\n\nif [[ ${INSTALL_FILEBOT} == \'true\' ]]; then\n    if ! command -v filebot &> /dev/null; then\n        # 1. Import signing keys\n        apt-get update\n        apt-get install -y --install-recommends dirmngr gnupg apt-transport-https\n        apt-key adv --fetch-keys "https://raw.githubusercontent.com/filebot/plugins/master/gpg/maintainer.pub"\n\n        # 2. Add deb repository to sources.list\n        echo "deb [arch=all] https://get.filebot.net/deb/ universal main" | tee /etc/apt/sources.list.d/filebot.list\n\n        # 3. Update package index\n        apt-get update\n\n        # 4. Install dependencies explicitly (otherwise apt-get autoremove may purge them)\n        apt-get install -y --install-recommends \\\n            default-jre \\\n            openjfx \\\n            mediainfo \\\n            libchromaprint-tools \\\n            p7zip-full \\\n            unrar\n\n        if [[ ${INSTALL_LEGACY_FILEBOT} == \'true\' ]]; then\n            # 5. Install FileBot legacy version\n            mkdir -p /config/filebot/\n            pushd /config/filebot/\n            if [[ ! -e /config/filebot/filebot_${FILEBOT_VERSION}_${ARCH}.deb ]]; then\n                curl -kSL \\\n                    -o /config/filebot/filebot_${FILEBOT_VERSION}_${ARCH}.deb \\\n                    "https://cfhcable.dl.sourceforge.net/project/filebot/filebot/FileBot_${FILEBOT_VERSION}/filebot_${FILEBOT_VERSION}_${ARCH}.deb"\n                chmod a+rw /config/filebot/filebot_${FILEBOT_VERSION}_${ARCH}.deb\n            fi\n            # apt-get install -y openjdk-8-jdk-headless   libjna-java\n            apt-get install -y /config/filebot/filebot_${FILEBOT_VERSION}_${ARCH}.deb\n\n            popd\n        else\n            # 5. Install FileBot from repo\n            apt-get install -y --install-recommends filebot\n        fi\n\n    fi\nfi\n\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"It may take some time for this script to complete the installation of FileBot and all of its dependencies.\nDuring this time, Unmanic will not start, and the web UI will not be accessible.\nBe patient, it will only need to run this installation the first time the container is started.")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can configure the script in the following ways:"),(0,r.kt)("table",{parentName:"admonition"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Variable"),(0,r.kt)("th",{parentName:"tr",align:null},"Set Value"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"INSTALL_FILEBOT"),(0,r.kt)("td",{parentName:"tr",align:null},"true / false"),(0,r.kt)("td",{parentName:"tr",align:null},"Enable / Disable the script")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"INSTALL_LEGACY_FILEBOT"),(0,r.kt)("td",{parentName:"tr",align:null},"true"),(0,r.kt)("td",{parentName:"tr",align:null},"Install the legacy version of FileBot ",(0,r.kt)("a",{parentName:"td",href:"https://sourceforge.net/projects/filebot/files/"},"link")," rather than the latest release")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"ARCH"),(0,r.kt)("td",{parentName:"tr",align:null},"amd64 / 1386 / armhf"),(0,r.kt)("td",{parentName:"tr",align:null},"Specify the hardware (x86_64 / x86 / ARM) version of FileBot (only required when installing the legacy version)")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"FILEBOT_VERSION"),(0,r.kt)("td",{parentName:"tr",align:null},"4.7.9"),(0,r.kt)("td",{parentName:"tr",align:null},"Specify the version of FileBot to download (only required when installing the legacy version)"))))),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Restart the container")),(0,r.kt)("p",null,"During startup, this script will install FileBot if it is not already installed in this container."),(0,r.kt)("h3",{id:"2-install-the-external-post-processor-script-plugin"},"2) Install the 'External Post-processor Script' Plugin"),(0,r.kt)("p",null,"Open the plugin installer and install the plugin named 'External Post-processor Script'"),(0,r.kt)("img",{className:"screenshot",src:n(8154).Z}),(0,r.kt)("h3",{id:"3-configure-the-external-post-processor-script-plugin"},"3) Configure the 'External Post-processor Script' Plugin"),(0,r.kt)("p",null,"Once installed, click on the 'External Post-processor Script' Plugin icon."),(0,r.kt)("img",{className:"screenshot",src:n(1156).Z}),(0,r.kt)("p",null,"Click on ",(0,r.kt)("strong",{parentName:"p"},"Settings")),(0,r.kt)("img",{className:"screenshot",src:n(9923).Z}),(0,r.kt)("h3",{id:"4-enable-the-external-post-processor-script-plugin"},"4) Enable the 'External Post-processor Script' Plugin"),(0,r.kt)("p",null,"In the Plugin table, enable the configured 'External Post-processor Script' Plugin"),(0,r.kt)("img",{className:"screenshot",src:n(9945).Z}),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"plugin-config-examples"},"Plugin Config Examples"),(0,r.kt)("p",null,"Here are some examples of what FileBot can be used for in an Unmanic Post-process..."),(0,r.kt)("p",null,"References:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.filebot.net/cli.html"},"FileBot CLI")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://www.filebot.net/naming.html"},"FileBot Format Expressions"))),(0,r.kt)("h3",{id:"rename-tv-shows-with-the-correct-codec-in-the-file-name"},"Rename TV Shows with the correct codec in the file name:"),(0,r.kt)("h5",{id:"run-the-command-for-each-output-file-created-by-unmanic"},"Run the command for each output file created by Unmanic"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"True")),(0,r.kt)("h5",{id:"command-or-script-to-execute"},"Command or script to execute:"),(0,r.kt)("blockquote",null,(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"filebot\n"))),(0,r.kt)("h5",{id:"arguments-to-pass-to-the-command-or-script"},"Arguments to pass to the command or script:"),(0,r.kt)("blockquote",null,(0,r.kt)("pre",{parentName:"blockquote"},(0,r.kt)("code",{parentName:"pre"},"--conflict skip\n-non-strict\n--db TheMovieDB::TV\n-rename \"{output_file_path}\"\n--format \"{n.upperInitial().space('.')}-{s00e00}-{t.upperInitial().space('.')}-{source}-{vf}-{vc}\"\n"))))}u.isMDXComponent=!0},9945:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/unmanic-guide-ext-post-processor-script-enable-ce2a4a015fd89317bd99c30ec2364bbc.png"},8154:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/unmanic-guide-ext-post-processor-script-install-bd391c565a4a4c320a71bbd05d6d66d5.png"},1156:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/unmanic-guide-file-bot-configure1-6a36f3a96ce7a1af1dfcba26e598f0c1.png"},9923:(e,t,n)=>{n.d(t,{Z:()=>i});const i=n.p+"assets/images/unmanic-guide-file-bot-configure2-464a6a672ab30715b1dedbdb764cf455.png"}}]);